{"version":3,"sources":["../src/index.ts","../src/Blurhash.tsx","../src/BlurhashCanvas.tsx"],"sourcesContent":["export { default as Blurhash } from './Blurhash';\nexport { default as BlurhashCanvas } from './BlurhashCanvas';\n","import * as React from 'react';\n\nimport BlurhashCanvas from './BlurhashCanvas';\n\ntype Props = React.HTMLAttributes<HTMLDivElement> & {\n  hash: string;\n  /** CSS height, default: 128 */\n  height?: number | string | 'auto';\n  punch?: number;\n  resolutionX?: number;\n  resolutionY?: number;\n  style?: React.CSSProperties;\n  /** CSS width, default: 128 */\n  width?: number | string | 'auto';\n};\n\nconst canvasStyle: React.CSSProperties = {\n  position: 'absolute',\n  top: 0,\n  bottom: 0,\n  left: 0,\n  right: 0,\n  width: '100%',\n  height: '100%',\n};\n\nexport default class Blurhash extends React.PureComponent<Props> {\n  static defaultProps = {\n    height: 128,\n    width: 128,\n    resolutionX: 32,\n    resolutionY: 32,\n  };\n\n  componentDidUpdate() {\n    if (this.props.resolutionX <= 0) {\n      throw new Error('resolutionX must be larger than zero');\n    }\n\n    if (this.props.resolutionY <= 0) {\n      throw new Error('resolutionY must be larger than zero');\n    }\n  }\n\n  render() {\n    const { hash, height, width, punch, resolutionX, resolutionY, style, ...rest } = this.props;\n\n    return (\n      <div\n        {...rest}\n        style={{ display: 'inline-block', height, width, ...style, position: 'relative' }}\n      >\n        <BlurhashCanvas\n          hash={hash}\n          height={resolutionY}\n          width={resolutionX}\n          punch={punch}\n          style={canvasStyle}\n        />\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\nimport { decode } from 'blurhash';\n\nexport type Props = React.CanvasHTMLAttributes<HTMLCanvasElement> & {\n  hash: string;\n  height?: number;\n  punch?: number;\n  width?: number;\n};\n\nexport default class BlurhashCanvas extends React.PureComponent<Props> {\n  static defaultProps = {\n    height: 128,\n    width: 128,\n  };\n\n  canvas: HTMLCanvasElement = null;\n\n  componentDidUpdate() {\n    this.draw();\n  }\n\n  handleRef = (canvas: HTMLCanvasElement) => {\n    this.canvas = canvas;\n    this.draw();\n  };\n\n  draw = () => {\n    const { hash, height, punch, width } = this.props;\n\n    if (this.canvas) {\n      const pixels = decode(hash, width, height, punch);\n\n      const ctx = this.canvas.getContext('2d');\n      const imageData = ctx.createImageData(width, height);\n      imageData.data.set(pixels);\n      ctx.putImageData(imageData, 0, 0);\n    }\n  };\n\n  render() {\n    const { hash, height, width, ...rest } = this.props;\n\n    return <canvas {...rest} height={height} width={width} ref={this.handleRef} />;\n  }\n}\n"],"mappings":"mjCAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,cAAAE,EAAA,mBAAAC,IAAA,eAAAC,EAAAJ,GCAA,IAAAK,EAAuB,oBCAvB,IAAAC,EAAuB,oBACvBC,EAAuB,oBASvB,IAAqBC,EAArB,cAAkD,eAAqB,CAAvE,kCAME,YAA4B,KAM5B,eAAaC,GAA8B,CACzC,KAAK,OAASA,EACd,KAAK,KAAK,CACZ,EAEA,UAAO,IAAM,CACX,GAAM,CAAE,KAAAC,EAAM,OAAAC,EAAQ,MAAAC,EAAO,MAAAC,CAAM,EAAI,KAAK,MAE5C,GAAI,KAAK,OAAQ,CACf,IAAMC,KAAS,UAAOJ,EAAMG,EAAOF,EAAQC,CAAK,EAE1CG,EAAM,KAAK,OAAO,WAAW,IAAI,EACjCC,EAAYD,EAAI,gBAAgBF,EAAOF,CAAM,EACnDK,EAAU,KAAK,IAAIF,CAAM,EACzBC,EAAI,aAAaC,EAAW,EAAG,CAAC,CAClC,CACF,EApBA,oBAAqB,CACnB,KAAK,KAAK,CACZ,CAoBA,QAAS,CACP,IAAyCC,EAAA,KAAK,MAAtC,MAAAP,EAAM,OAAAC,EAAQ,MAAAE,CAzC1B,EAyC6CI,EAATC,EAAAC,EAASF,EAAT,CAAxB,OAAM,SAAQ,UAEtB,OAAO,gBAAC,SAAAG,EAAAC,EAAA,GAAWH,GAAX,CAAiB,OAAQP,EAAQ,MAAOE,EAAO,IAAK,KAAK,WAAW,CAC9E,CACF,EAnCqBL,EACZ,aAAe,CACpB,OAAQ,IACR,MAAO,GACT,EDEF,IAAMc,EAAmC,CACvC,SAAU,WACV,IAAK,EACL,OAAQ,EACR,KAAM,EACN,MAAO,EACP,MAAO,OACP,OAAQ,MACV,EAEqBC,EAArB,cAA4C,eAAqB,CAQ/D,oBAAqB,CACnB,GAAI,KAAK,MAAM,aAAe,EAC5B,MAAM,IAAI,MAAM,sCAAsC,EAGxD,GAAI,KAAK,MAAM,aAAe,EAC5B,MAAM,IAAI,MAAM,sCAAsC,CAE1D,CAEA,QAAS,CACP,IAAiFC,EAAA,KAAK,MAA9E,MAAAC,EAAM,OAAAC,EAAQ,MAAAC,EAAO,MAAAC,EAAO,YAAAC,EAAa,YAAAC,EAAa,MAAAC,CA7ClE,EA6CqFP,EAATQ,EAAAC,EAAST,EAAT,CAAhE,OAAM,SAAQ,QAAO,QAAO,cAAa,cAAa,UAE9D,OACE,gBAAC,MAAAU,EAAAC,EAAA,GACKH,GADL,CAEC,MAAOE,EAAAC,EAAA,CAAE,QAAS,eAAgB,OAAAT,EAAQ,MAAAC,GAAUI,GAA7C,CAAoD,SAAU,UAAW,KAEhF,gBAACK,EAAA,CACC,KAAMX,EACN,OAAQK,EACR,MAAOD,EACP,MAAOD,EACP,MAAON,EACT,CACF,CAEJ,CACF,EApCqBC,EACZ,aAAe,CACpB,OAAQ,IACR,MAAO,IACP,YAAa,GACb,YAAa,EACf","names":["src_exports","__export","Blurhash","BlurhashCanvas","__toCommonJS","React","React","import_blurhash","BlurhashCanvas","canvas","hash","height","punch","width","pixels","ctx","imageData","_a","rest","__objRest","__spreadProps","__spreadValues","canvasStyle","Blurhash","_a","hash","height","width","punch","resolutionX","resolutionY","style","rest","__objRest","__spreadProps","__spreadValues","BlurhashCanvas"]}